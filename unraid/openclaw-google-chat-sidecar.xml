<?xml version="1.0"?>
<Container version="2">
  <Name>openclaw-google-chat-sidecar</Name>
  <Repository>ghcr.io/dracoc77/openclaw-google-chat-sidecar:latest</Repository>
  <Registry>https://ghcr.io/dracoc77/openclaw-google-chat-sidecar</Registry>
  <Branch>
    <Tag>latest</Tag>
    <TagDescription>Latest stable release</TagDescription>
  </Branch>
  <Network>bridge</Network>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/DracoC77/openclaw_google_chats_interface/issues</Support>
  <Project>https://github.com/DracoC77/openclaw_google_chats_interface</Project>
  <Overview>
    Google Chat sidecar for OpenClaw. Polls a Google Chat group for messages,
    stores history in SQLite, and exposes a REST API that OpenClaw's agent
    skill can call to read/send messages.

    First run: visit http://[IP]:[PORT]/auth/url to complete Google OAuth setup.
  </Overview>
  <Category>Tools: Productivity:</Category>
  <WebUI>http://[IP]:[PORT:3100]/status</WebUI>
  <Icon>https://raw.githubusercontent.com/DracoC77/openclaw_google_chats_interface/main/unraid/icon.png</Icon>
  <ExtraParams/>
  <DateInstalled/>
  <Description>
    Google Chat sidecar for OpenClaw. Polls your Google Chat group,
    stores message history, and lets your OpenClaw agent read and send
    messages on your behalf.
  </Description>

  <!-- Persistent data volume (SQLite DB + OAuth tokens) -->
  <Config
    Name="App Data"
    Target="/data"
    Default="/mnt/user/appdata/openclaw-google-chat"
    Mode="rw"
    Description="Persistent storage for SQLite database and OAuth tokens."
    Type="Path"
    Display="always"
    Required="true"
  >/mnt/user/appdata/openclaw-google-chat</Config>

  <!-- Web UI / API port -->
  <Config
    Name="API Port"
    Target="3100"
    Default="3100"
    Mode="tcp"
    Description="Sidecar REST API port. Used by the OpenClaw skill and for initial OAuth setup."
    Type="Port"
    Display="always"
    Required="true"
  >3100</Config>

  <!-- Google OAuth Client ID -->
  <Config
    Name="Google Client ID"
    Target="GOOGLE_CLIENT_ID"
    Default=""
    Description="OAuth 2.0 Client ID from Google Cloud Console."
    Type="Variable"
    Display="always"
    Required="true"
    Mask="false"
  />

  <!-- Google OAuth Client Secret -->
  <Config
    Name="Google Client Secret"
    Target="GOOGLE_CLIENT_SECRET"
    Default=""
    Description="OAuth 2.0 Client Secret from Google Cloud Console."
    Type="Variable"
    Display="always"
    Required="true"
    Mask="true"
  />

  <!-- Google Chat Space ID -->
  <Config
    Name="Google Chat Space ID"
    Target="GOOGLE_CHAT_SPACE_ID"
    Default="spaces/XXXXXXXXX"
    Description="The space ID of your Google Chat group. Format: spaces/XXXXXXXXX"
    Type="Variable"
    Display="always"
    Required="true"
    Mask="false"
  >spaces/XXXXXXXXX</Config>

  <!-- OAuth Redirect URI -->
  <Config
    Name="OAuth Redirect URI"
    Target="OAUTH_REDIRECT_URI"
    Default="http://localhost:3100/auth/callback"
    Description="Must match the redirect URI configured in GCP Console. Change localhost to your Unraid IP if accessing remotely."
    Type="Variable"
    Display="always"
    Required="true"
    Mask="false"
  >http://localhost:3100/auth/callback</Config>

  <!-- Sidecar Port (internal) -->
  <Config
    Name="Sidecar Port"
    Target="SIDECAR_PORT"
    Default="3100"
    Description="Internal port the sidecar listens on. Should match the API Port above."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"
  >3100</Config>

  <!-- SQLite DB path (internal) -->
  <Config
    Name="Database Path"
    Target="DB_PATH"
    Default="/data/google_chat.db"
    Description="Path to SQLite database inside the container."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"
  >/data/google_chat.db</Config>

  <!-- Polling: active interval -->
  <Config
    Name="Active Poll Interval"
    Target="POLL_ACTIVE_INTERVAL"
    Default="30"
    Description="Seconds between polls when the agent is actively chatting."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"
  >30</Config>

  <!-- Polling: idle interval -->
  <Config
    Name="Idle Poll Interval"
    Target="POLL_IDLE_INTERVAL"
    Default="14400"
    Description="Seconds between polls when idle (default 4 hours)."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"
  >14400</Config>

  <!-- Polling: decay timeout -->
  <Config
    Name="Poll Decay Timeout"
    Target="POLL_DECAY_TIMEOUT"
    Default="600"
    Description="Seconds of agent inactivity before polling slows to idle (default 10 min)."
    Type="Variable"
    Display="advanced"
    Required="false"
    Mask="false"
  >600</Config>
</Container>
